// This file was auto-generated by Fern from our API Definition.

package identity

import (
	json "encoding/json"
	fmt "fmt"
	uuid "github.com/google/uuid"
	sdk "sdk"
	game "sdk/common/game"
	group "sdk/common/group"
	identity "sdk/common/identity"
	core "sdk/core"
	matchmaker "sdk/matchmaker"
	time "time"
)

type GetHandlesRequest struct {
	IdentityIds []string `json:"-"`
}

type GetProfileRequest struct {
	WatchIndex sdk.WatchQuery `json:"-"`
}

type GetSelfProfileRequest struct {
	WatchIndex sdk.WatchQuery `json:"-"`
}

type GetSummariesRequest struct {
	IdentityIds []string `json:"-"`
}

type ListFollowersRequest struct {
	Anchor *string `json:"-"`
	// Range is between 1 and 32 (inclusive).
	Limit *string `json:"-"`
}

type ListFollowingRequest struct {
	Anchor *string `json:"-"`
	// Range is between 1 and 32 (inclusive).
	Limit *string `json:"-"`
}

type ListFriendsRequest struct {
	Anchor *string `json:"-"`
	// Range is between 1 and 32 (inclusive).
	Limit *string `json:"-"`
}

type ListMutualFriendsRequest struct {
	Anchor *string `json:"-"`
	// Range is between 1 and 32 (inclusive).
	Limit *string `json:"-"`
}

type ListRecentFollowersRequest struct {
	Count      *int            `json:"-"`
	WatchIndex *sdk.WatchQuery `json:"-"`
}

type PrepareAvatarUploadRequest struct {
	Path string `json:"path"`
	// See https://www.iana.org/assignments/media-types/media-types.xhtml
	Mime          string `json:"mime"`
	ContentLength int64  `json:"content_length"`
}

type ReportRequest struct {
	Reason *string `json:"reason,omitempty"`
}

type SearchRequest struct {
	// The query to match identity display names and account numbers against.
	Query string `json:"-"`
	// How many identities to offset the search by.
	Anchor *string `json:"-"`
	// Amount of identities to return. Must be between 1 and 32 inclusive.
	Limit *int `json:"-"`
}

type SetGameActivityRequest struct {
	GameActivity *UpdateGameActivity `json:"game_activity,omitempty"`
}

type SetupRequest struct {
	ExistingIdentityToken *sdk.Jwt `json:"existing_identity_token,omitempty"`
}

type SignupForBetaRequest struct {
	Name           string  `json:"name"`
	CompanyName    *string `json:"company_name,omitempty"`
	CompanySize    string  `json:"company_size"`
	PreferredTools string  `json:"preferred_tools"`
	Goals          string  `json:"goals"`
}

// An identity's access token identity.
type AccessTokenLinkedAccount struct {
	Name string `json:"name"`

	_rawJSON json.RawMessage
}

func (a *AccessTokenLinkedAccount) UnmarshalJSON(data []byte) error {
	type unmarshaler AccessTokenLinkedAccount
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*a = AccessTokenLinkedAccount(value)
	a._rawJSON = json.RawMessage(data)
	return nil
}

func (a *AccessTokenLinkedAccount) String() string {
	if len(a._rawJSON) > 0 {
		if value, err := core.StringifyJSON(a._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(a); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", a)
}

// The state of the given identity's developer status.
type DevState string

const (
	DevStateInactive DevState = "inactive"
	DevStatePending  DevState = "pending"
	DevStateAccepted DevState = "accepted"
)

func NewDevStateFromString(s string) (DevState, error) {
	switch s {
	case "inactive":
		return DevStateInactive, nil
	case "pending":
		return DevStatePending, nil
	case "accepted":
		return DevStateAccepted, nil
	}
	var t DevState
	return "", fmt.Errorf("%s is not a valid %T", s, t)
}

func (d DevState) Ptr() *DevState {
	return &d
}

// An identity's linked email.
type EmailLinkedAccount struct {
	Email sdk.Email `json:"email"`

	_rawJSON json.RawMessage
}

func (e *EmailLinkedAccount) UnmarshalJSON(data []byte) error {
	type unmarshaler EmailLinkedAccount
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*e = EmailLinkedAccount(value)
	e._rawJSON = json.RawMessage(data)
	return nil
}

func (e *EmailLinkedAccount) String() string {
	if len(e._rawJSON) > 0 {
		if value, err := core.StringifyJSON(e._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(e); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", e)
}

type GameLinkStatus string

const (
	GameLinkStatusIncomplete GameLinkStatus = "incomplete"
	GameLinkStatusComplete   GameLinkStatus = "complete"
	GameLinkStatusCancelled  GameLinkStatus = "cancelled"
)

func NewGameLinkStatusFromString(s string) (GameLinkStatus, error) {
	switch s {
	case "incomplete":
		return GameLinkStatusIncomplete, nil
	case "complete":
		return GameLinkStatusComplete, nil
	case "cancelled":
		return GameLinkStatusCancelled, nil
	}
	var t GameLinkStatus
	return "", fmt.Errorf("%s is not a valid %T", s, t)
}

func (g GameLinkStatus) Ptr() *GameLinkStatus {
	return &g
}

// An event relevant to the current identity.
type GlobalEvent struct {
	Ts           time.Time                `json:"ts"`
	Kind         *GlobalEventKind         `json:"kind,omitempty"`
	Notification *GlobalEventNotification `json:"notification,omitempty"`

	_rawJSON json.RawMessage
}

func (g *GlobalEvent) UnmarshalJSON(data []byte) error {
	type unmarshaler GlobalEvent
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*g = GlobalEvent(value)
	g._rawJSON = json.RawMessage(data)
	return nil
}

func (g *GlobalEvent) String() string {
	if len(g._rawJSON) > 0 {
		if value, err := core.StringifyJSON(g._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(g); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", g)
}

type GlobalEventIdentityUpdate struct {
	Identity *Profile `json:"identity,omitempty"`

	_rawJSON json.RawMessage
}

func (g *GlobalEventIdentityUpdate) UnmarshalJSON(data []byte) error {
	type unmarshaler GlobalEventIdentityUpdate
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*g = GlobalEventIdentityUpdate(value)
	g._rawJSON = json.RawMessage(data)
	return nil
}

func (g *GlobalEventIdentityUpdate) String() string {
	if len(g._rawJSON) > 0 {
		if value, err := core.StringifyJSON(g._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(g); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", g)
}

type GlobalEventKind struct {
	IdentityUpdate      *GlobalEventIdentityUpdate      `json:"identity_update,omitempty"`
	MatchmakerLobbyJoin *GlobalEventMatchmakerLobbyJoin `json:"matchmaker_lobby_join,omitempty"`

	_rawJSON json.RawMessage
}

func (g *GlobalEventKind) UnmarshalJSON(data []byte) error {
	type unmarshaler GlobalEventKind
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*g = GlobalEventKind(value)
	g._rawJSON = json.RawMessage(data)
	return nil
}

func (g *GlobalEventKind) String() string {
	if len(g._rawJSON) > 0 {
		if value, err := core.StringifyJSON(g._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(g); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", g)
}

type GlobalEventMatchmakerLobbyJoin struct {
	Lobby  *matchmaker.JoinLobby           `json:"lobby,omitempty"`
	Ports  map[string]*matchmaker.JoinPort `json:"ports,omitempty"`
	Player *matchmaker.JoinPlayer          `json:"player,omitempty"`

	_rawJSON json.RawMessage
}

func (g *GlobalEventMatchmakerLobbyJoin) UnmarshalJSON(data []byte) error {
	type unmarshaler GlobalEventMatchmakerLobbyJoin
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*g = GlobalEventMatchmakerLobbyJoin(value)
	g._rawJSON = json.RawMessage(data)
	return nil
}

func (g *GlobalEventMatchmakerLobbyJoin) String() string {
	if len(g._rawJSON) > 0 {
		if value, err := core.StringifyJSON(g._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(g); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", g)
}

// Notifications represent information that should be presented to the user
// immediately.
// At the moment, only chat message events have associated notifications.
//
// # Display
//
// Notifications should be displayed in an unobtrusive manner throughout the
// entire game. Notifications should disappear after a few seconds if not
// interacted with.
//
// # Interactions
//
// If your platform supports it, notifications should be able to be clicked or
// tapped in order to open the relevant context for the event.
// For a simple implementation of notification interactions, open `url` in a
// web browser to present the relevant context. For example, a chat message
// notification will open the thread the chat message was sent in.
// For advanced implementations that implement a custom chat UI, use
// `GlobalEvent.kind` to determine what action to take when the notification is interacted with.
// For example, if the global event kind is `GlobalEventChatMessage`, then open
// the chat UI for the given thread.
type GlobalEventNotification struct {
	Title       string `json:"title"`
	Description string `json:"description"`
	// URL to an image thumbnail that should be shown for this notification.
	ThumbnailUrl string `json:"thumbnail_url"`
	// Rivet Hub URL that holds the relevant context for this notification.
	Url string `json:"url"`

	_rawJSON json.RawMessage
}

func (g *GlobalEventNotification) UnmarshalJSON(data []byte) error {
	type unmarshaler GlobalEventNotification
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*g = GlobalEventNotification(value)
	g._rawJSON = json.RawMessage(data)
	return nil
}

func (g *GlobalEventNotification) String() string {
	if len(g._rawJSON) > 0 {
		if value, err := core.StringifyJSON(g._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(g); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", g)
}

// A group that the given identity.
type Group struct {
	Group *group.Handle `json:"group,omitempty"`

	_rawJSON json.RawMessage
}

func (g *Group) UnmarshalJSON(data []byte) error {
	type unmarshaler Group
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*g = Group(value)
	g._rawJSON = json.RawMessage(data)
	return nil
}

func (g *Group) String() string {
	if len(g._rawJSON) > 0 {
		if value, err := core.StringifyJSON(g._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(g); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", g)
}

// A union representing an identity's linked accounts.
type LinkedAccount struct {
	Email       *EmailLinkedAccount       `json:"email,omitempty"`
	AccessToken *AccessTokenLinkedAccount `json:"access_token,omitempty"`

	_rawJSON json.RawMessage
}

func (l *LinkedAccount) UnmarshalJSON(data []byte) error {
	type unmarshaler LinkedAccount
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*l = LinkedAccount(value)
	l._rawJSON = json.RawMessage(data)
	return nil
}

func (l *LinkedAccount) String() string {
	if len(l._rawJSON) > 0 {
		if value, err := core.StringifyJSON(l._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(l); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", l)
}

// An identity profile.
type Profile struct {
	IdentityId    uuid.UUID         `json:"identity_id"`
	DisplayName   sdk.DisplayName   `json:"display_name"`
	AccountNumber sdk.AccountNumber `json:"account_number"`
	// The URL of this identity's avatar image.
	AvatarUrl string             `json:"avatar_url"`
	Presence  *identity.Presence `json:"presence,omitempty"`
	// Whether or not this identity is registered with a linked account.
	IsRegistered bool                    `json:"is_registered"`
	External     *identity.ExternalLinks `json:"external,omitempty"`
	// Whether or not this identity is an admin.
	IsAdmin bool `json:"is_admin"`
	// Whether or not this game user has been linked through the Rivet dashboard.
	IsGameLinked *bool `json:"is_game_linked,omitempty"`
	// **Deprecated**
	DevState       *DevState `json:"dev_state,omitempty"`
	FollowerCount  int64     `json:"follower_count"`
	FollowingCount int64     `json:"following_count"`
	// Whether or not the requestee's identity is following this identity.
	Following bool `json:"following"`
	// Whether or not this identity is both following and is followed by the requestee's identity.
	IsFollowingMe     bool                `json:"is_following_me"`
	IsMutualFollowing bool                `json:"is_mutual_following"`
	JoinTs            time.Time           `json:"join_ts"`
	Bio               sdk.Bio             `json:"bio"`
	LinkedAccounts    []*LinkedAccount    `json:"linked_accounts,omitempty"`
	Groups            []*Group            `json:"groups,omitempty"`
	Games             []*game.StatSummary `json:"games,omitempty"`
	// Whether or not this identity is awaiting account deletion. Only visible to when the requestee is
	// this identity.
	AwaitingDeletion *bool `json:"awaiting_deletion,omitempty"`

	_rawJSON json.RawMessage
}

func (p *Profile) UnmarshalJSON(data []byte) error {
	type unmarshaler Profile
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*p = Profile(value)
	p._rawJSON = json.RawMessage(data)
	return nil
}

func (p *Profile) String() string {
	if len(p._rawJSON) > 0 {
		if value, err := core.StringifyJSON(p._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(p); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", p)
}

// An identity summary.
type Summary struct {
	IdentityId    uuid.UUID         `json:"identity_id"`
	DisplayName   sdk.DisplayName   `json:"display_name"`
	AccountNumber sdk.AccountNumber `json:"account_number"`
	// The URL of this identity's avatar image.
	AvatarUrl string             `json:"avatar_url"`
	Presence  *identity.Presence `json:"presence,omitempty"`
	// Whether or not this identity is registered with a linked account.
	IsRegistered bool                    `json:"is_registered"`
	External     *identity.ExternalLinks `json:"external,omitempty"`
	// Whether or not the requestee's identity is following this identity.
	Following bool `json:"following"`
	// Whether or not this identity is both following and is followed by the requestee's identity.
	IsFollowingMe     bool `json:"is_following_me"`
	IsMutualFollowing bool `json:"is_mutual_following"`

	_rawJSON json.RawMessage
}

func (s *Summary) UnmarshalJSON(data []byte) error {
	type unmarshaler Summary
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*s = Summary(value)
	s._rawJSON = json.RawMessage(data)
	return nil
}

func (s *Summary) String() string {
	if len(s._rawJSON) > 0 {
		if value, err := core.StringifyJSON(s._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(s); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", s)
}

// Information about the identity's current game. This is information that all other identities can see about what the current identity is doing.
type UpdateGameActivity struct {
	// A short message about the current game activity.
	Message *string `json:"message,omitempty"`
	// JSON data seen by anyone.
	PublicMetadata interface{} `json:"public_metadata,omitempty"`
	// JSON data seen only by the given identity and their mutual followers.
	MutualMetadata interface{} `json:"mutual_metadata,omitempty"`

	_rawJSON json.RawMessage
}

func (u *UpdateGameActivity) UnmarshalJSON(data []byte) error {
	type unmarshaler UpdateGameActivity
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*u = UpdateGameActivity(value)
	u._rawJSON = json.RawMessage(data)
	return nil
}

func (u *UpdateGameActivity) String() string {
	if len(u._rawJSON) > 0 {
		if value, err := core.StringifyJSON(u._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(u); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", u)
}

type GetGameLinkNewIdentity struct {
	IdentityToken         sdk.Jwt   `json:"identity_token"`
	IdentityTokenExpireTs time.Time `json:"identity_token_expire_ts"`
	Identity              *Profile  `json:"identity,omitempty"`

	_rawJSON json.RawMessage
}

func (g *GetGameLinkNewIdentity) UnmarshalJSON(data []byte) error {
	type unmarshaler GetGameLinkNewIdentity
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*g = GetGameLinkNewIdentity(value)
	g._rawJSON = json.RawMessage(data)
	return nil
}

func (g *GetGameLinkNewIdentity) String() string {
	if len(g._rawJSON) > 0 {
		if value, err := core.StringifyJSON(g._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(g); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", g)
}

type ValidateProfileResponse struct {
	Errors []*sdk.ValidationError `json:"errors,omitempty"`

	_rawJSON json.RawMessage
}

func (v *ValidateProfileResponse) UnmarshalJSON(data []byte) error {
	type unmarshaler ValidateProfileResponse
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*v = ValidateProfileResponse(value)
	v._rawJSON = json.RawMessage(data)
	return nil
}

func (v *ValidateProfileResponse) String() string {
	if len(v._rawJSON) > 0 {
		if value, err := core.StringifyJSON(v._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(v); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", v)
}

type UpdateProfileRequest struct {
	DisplayName   *sdk.DisplayName   `json:"display_name,omitempty"`
	AccountNumber *sdk.AccountNumber `json:"account_number,omitempty"`
	Bio           *sdk.Bio           `json:"bio,omitempty"`
}

type UpdateStatusRequest struct {
	Status identity.Status `json:"status,omitempty"`
}

type ValidateProfileRequest struct {
	DisplayName   *sdk.DisplayName   `json:"display_name,omitempty"`
	AccountNumber *sdk.AccountNumber `json:"account_number,omitempty"`
	Bio           *sdk.Bio           `json:"bio,omitempty"`
}
