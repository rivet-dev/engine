# Multiplayer Game

## Challenges of Building Multiplayer Games

Common tools: Unity Netcode, Photon, Colyseus, custom WebSocket servers, Redis for state, game server hosting

Main pain points:
- Managing game state synchronization across multiple players with low latency
- Handling player connections, disconnections, and reconnections gracefully
- Scaling game servers and matchmaking infrastructure
- Persisting game state between sessions
- Complex networking code for state replication and conflict resolution

## How Rivet Solves This

Rivet actors provide authoritative game servers with built-in state management and realtime networking.

**Authoritative Game State**: Each game room runs in its own actor with server-authoritative state management.

```typescript
const gameRoom = actor({
  state: {
    players: {} as Record<string, { x: number, y: number, health: number }>,
    gameState: "waiting" as "waiting" | "playing" | "ended",
    startTime: 0
  },

  createConnState: (c, opts, params: { playerId: string }) => ({
    playerId: params.playerId
  }),

  actions: {
    movePlayer: (c, x: number, y: number) => {
      const playerId = c.conn.state.playerId;
      if (c.state.players[playerId]) {
        c.state.players[playerId].x = x;
        c.state.players[playerId].y = y;

        // Broadcast position to all other players
        c.broadcast("playerMoved", { playerId, x, y });
      }
    },

    startGame: (c) => {
      c.state.gameState = "playing";
      c.state.startTime = Date.now();
      c.broadcast("gameStarted", { startTime: c.state.startTime });
    }
  }
});
```

**Low-Latency Updates**: Broadcast game state changes in realtime using WebSockets with built-in [events](/docs/actors/events).

**State Persistence**: Game state persists automatically, allowing players to rejoin games after disconnections. Learn about [state management](/docs/actors/state).

**Connection Tracking**: Track connected players and handle disconnections gracefully using [connections](/docs/actors/connections).

**Tick-Based Updates**: Use [scheduled actions](/docs/actors/schedule) for fixed-rate game loops and physics updates.

## Full Example Projects

<CardGroup>
<Card href="https://github.com/rivet-gg/rivet/tree/main/examples/game" title="Multiplayer Game Example" />
</CardGroup>
